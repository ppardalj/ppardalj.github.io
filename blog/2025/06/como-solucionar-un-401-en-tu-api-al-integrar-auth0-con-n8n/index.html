<!doctype html><html lang=es><head><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-PJM6WP")</script><meta charset=utf-8><title>Cómo solucionar un 401 en tu API al integrar Auth0 con n8n | Pedro Pardal</title>
<meta name=description content="Si tu API devuelve un 401 a pesar de que Auth0 emite un access_token correctamente, el problema puede estar en el parámetro 'audience'. Te explico cómo solucionarlo en n8n."><meta name=author content="Pedro Pardal"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta property="og:url" content="https://www.ppardalj.com/blog/2025/06/como-solucionar-un-401-en-tu-api-al-integrar-auth0-con-n8n/"><meta property="og:site_name" content="Pedro Pardal"><meta property="og:title" content="Cómo solucionar un 401 en tu API al integrar Auth0 con n8n"><meta property="og:description" content="Si tu API devuelve un 401 a pesar de que Auth0 emite un access_token correctamente, el problema puede estar en el parámetro 'audience'. Te explico cómo solucionarlo en n8n."><meta property="og:locale" content="es"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2025-06-01T00:00:00+01:00"><meta property="article:modified_time" content="2025-06-01T00:00:00+01:00"><meta property="article:tag" content="Nocode"><meta property="og:image" content="https://www.ppardalj.com/images/blog/lowcode.jpg"><meta itemprop=name content="Cómo solucionar un 401 en tu API al integrar Auth0 con n8n"><meta itemprop=description content="Si tu API devuelve un 401 a pesar de que Auth0 emite un access_token correctamente, el problema puede estar en el parámetro 'audience'. Te explico cómo solucionarlo en n8n."><meta itemprop=datePublished content="2025-06-01T00:00:00+01:00"><meta itemprop=dateModified content="2025-06-01T00:00:00+01:00"><meta itemprop=wordCount content="367"><meta itemprop=image content="https://www.ppardalj.com/images/blog/lowcode.jpg"><meta itemprop=keywords content="Nocode"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.ppardalj.com/images/blog/lowcode.jpg"><meta name=twitter:title content="Cómo solucionar un 401 en tu API al integrar Auth0 con n8n"><meta name=twitter:description content="Si tu API devuelve un 401 a pesar de que Auth0 emite un access_token correctamente, el problema puede estar en el parámetro 'audience'. Te explico cómo solucionarlo en n8n."><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css integrity=sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm crossorigin=anonymous><link rel=stylesheet href=https://www.ppardalj.com/scss/main.css><link rel=stylesheet href=https://www.ppardalj.com/scss/hero.css><script type=text/javascript id=hs-script-loader async defer src=//js.hs-scripts.com/8231847.js></script><link rel=stylesheet type=text/css href=https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css><link rel=stylesheet href=https://www.ppardalj.com/scss/blog.css><link rel=stylesheet href=https://www.ppardalj.com/scss/hero.css></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PJM6WP" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><nav class="navbar navbar-dark dark navbar-expand-lg navbar-shrink"><div class=container><a href=/ class=navbar-brand><p>Pedro Pardal</p></a><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarTogglerDemo01 aria-controls=navbarTogglerDemo01 aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarTogglerDemo01><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Servicios</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a class=dropdown-item href=/team-coaching/>Team Coaching</a>
<a class=dropdown-item href=https://www.exeal.com/>Cursos</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdownResources role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Recursos</a><div class=dropdown-menu aria-labelledby=navbarDropdownResources><a class=dropdown-item href=/newsletter/>Newsletter</a>
<a class=dropdown-item href=/blog/>Blog</a></div></li><li class=nav-item><a class="nav-link nav-button" href=/contacto/>Contacto</a></li></ul></div></div></nav><header class="hero hero-bg-img" style=background-image:url(/images/blog/lowcode.jpg)><div class="hero-bg-img-mask bg-mask"><div class="container h-100"><div class="row h-100 align-items-center"><div class="col-12 text-center"><ul class="tags tags-light"><li><a href=https://www.ppardalj.com/tags/nocode/>#nocode</a></li></ul><h1><span class=underline>Cómo solucionar un 401 en tu API al integrar Auth0 con n8n</span></h1><h2>Pedro Pardal</h2><p class=date>2025/06/01</p></div></div></div></div></header><section id=sect-body><div class=container><article><p>Si estás integrando <strong>n8n</strong> con <strong>Auth0</strong> para automatizar llamadas a una API protegida con OAuth2, es posible que te encuentres con un error desconcertante:</p><blockquote><p><strong>n8n realiza el login correctamente, Auth0 emite el token sin errores, pero tu API responde con un 401 Unauthorized.</strong></p></blockquote><p>En concreto, esto es la stack trace del error:</p><pre tabindex=0><code>NodeApiError: Authorization failed - please check your credentials
at ExecuteContext.execute (/opt/render/project/src/packages/nodes-base/nodes/HttpRequest/V3/HttpRequestV3.node.ts:769:15)
at processTicksAndRejections (node:internal/process/task_queues:105:5)
at WorkflowExecute.runNode (/opt/render/project/src/packages/core/src/execution-engine/workflow-execute.ts:1185:9)
at /opt/render/project/src/packages/core/src/execution-engine/workflow-execute.ts:1534:27
at /opt/render/project/src/packages/core/src/execution-engine/workflow-execute.ts:2098:11
</code></pre><p>Este problema suele deberse a que el <code>access_token</code> que recibe n8n <strong>no tiene el <code>audience</code> correcto</strong>. Es decir, Auth0 no está emitiendo un token dirigido a tu API específica, sino un token &ldquo;genérico&rdquo; que tu backend no reconoce como válido.</p><hr><h2 id=por-qué-ocurre-esto>¿Por qué ocurre esto?</h2><p>En Auth0, los tokens de acceso (JWT) incluyen un campo <code>aud</code> (audience) que indica para qué API están destinados. Si este valor no coincide con el que tu API espera, la validación del token fallará y devolverá un 401, incluso si el resto del flujo OAuth2 ha sido exitoso.</p><p>Por defecto, <strong>n8n no incluye el parámetro <code>audience</code> en la URL de autorización que envía a Auth0</strong>, por lo que el token recibido no está asociado a ninguna API concreta.</p><hr><h2 id=cómo-solucionarlo>Cómo solucionarlo</h2><p>La solución consiste en añadir el parámetro <code>audience</code> manualmente en la configuración de la credencial OAuth2 en n8n.</p><h3 id=pasos>Pasos:</h3><ol><li>Ve a <strong>Credenciales > OAuth2 API</strong> en tu instancia de n8n.</li><li>Abre la credencial configurada con Auth0.</li><li>En el campo <strong>Auth URI Query Parameters</strong>, añade lo siguiente:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>audience=https://api.tu-dominio.com
</span></span></code></pre></div><p>Este valor debe coincidir exactamente con el <strong>Identifier</strong> que hayas definido en Auth0 al crear tu API (en Auth0 → APIs).</p><ol start=4><li>Guarda y reconecta la credencial.</li></ol><hr><h2 id=resultado>Resultado</h2><p>A partir de ese momento:</p><ul><li>n8n incluirá el parámetro <code>audience</code> al redirigir al login de Auth0.</li><li>Auth0 emitirá un <code>access_token</code> válido para tu API, con el campo <code>aud</code> correctamente establecido.</li><li>Tu backend aceptará el token y procesará la solicitud sin devolver un 401.</li></ul><hr><h2 id=conclusión>Conclusión</h2><p>Cuando trabajas con Auth0 y OAuth2, es fundamental asegurarse de que los tokens de acceso contienen el <code>audience</code> esperado por tu API. En herramientas como n8n, donde la configuración OAuth2 es flexible pero no siempre obvia, este pequeño ajuste puede marcar la diferencia entre una integración funcional y una frustración silenciosa.</p></article></div><div class=container><div class="row h-100 align-items-center"><div class="col-12 text-center"><ul class="tags tags-dark"><li><a href=https://www.ppardalj.com/tags/nocode/>#nocode</a></li></ul><div class=post-author><img class=rounded-circle src=/images/team/ppardal-avatar.jpg><div class=post-author-name><h2>Pedro Pardal</h2><p>Software Engineer & Technical Coach</p><ul class="social-icons list-inline"><li class=list-inline-item><a target=_blank href=https://twitter.com/ppardalj><img src=/assets/img/blog/social-icons/icon-twitter.svg></a></li><li class=list-inline-item><a target=_blank href=https://www.linkedin.com/in/pedro-pardal-jimena-36764344/><img src=/assets/img/blog/social-icons/icon-linkedin.svg></a></li><li class=list-inline-item><a target=_blank href=https://github.com/ppardalj><img src=/assets/img/blog/social-icons/icon-github.svg></a></li></ul></div></div><div class=addthis_inline_share_toolbox></div></div></div></div></section><footer class=black><div class=container><div class="row align-items-center"><div class="col-lg-6 text-lg-left"><a href=/><p>Pedro Pardal</p></a><p><a href=/legal/legal-notice/>Aviso legal</a> |
<a href=/legal/cookie-policy/>Política de cookies</a> |
<a href=/legal/privacy-policy/>Política de privacidad</a></p></div><div class="col-lg-6 social-media"><ul class="list-inline text-lg-right mt-3 mt-lg-0"><li class=list-inline-item><a target=_blank href=https://x.com/ppardalj><img src=/assets/img/social/twitter.svg></a></li><li class=list-inline-item><a target=_blank href=https://linkedin.com/in/ppardalj><img src=/assets/img/social/linkedin.svg></a></li><li class=list-inline-item><a target=_blank href=https://www.youtube.com/@ppardalj><img src=/assets/img/social/youtube.svg></a></li><li class=list-inline-item><a target=_blank href=https://github.com/ppardalj><img src=/assets/img/social/github.svg></a></li></ul></div></div></div></footer><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js integrity=sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q crossorigin=anonymous></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js integrity=sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl crossorigin=anonymous></script><script src=/assets/js/scroll.js></script><script src=/assets/js/redirect.js></script><script>function loadScript(e){var n=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.src="https://tracker.metricool.com/resources/be.js",t.onreadystatechange=e,t.onload=e,n.appendChild(t)}loadScript(function(){beTracker.t({hash:"45d30dfb71957d625ad900e4772a2d6a"})})</script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5f2bf2edad69c454"></script></body></html>
<!doctype html><html lang=es-es><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>Mi primer proyecto legacy | Pedro Pardal</title>
<meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Mi primer contacto con código legacy fue hace ya más de 15 años, y ni siquiera sabía lo que era código legacy. En aquella época, jugaba a un juego online que se llama Ultima Online (si por casualidad has llegado a jugar, dame like, suscribete y activa la campanita). Básicamente es un RPG de mundo abierto donde puedes interactuar con los personajes de otra gente, ir a matar bichicos, pegarte de hostias con los demás… algo parecido al WoW, pero más viejuno todavía, con gráficos en 2D isométricos cutres."><meta name=generator content="Hugo 0.143.1"><meta name=robots content="index, follow"><link rel=stylesheet href=/ananke/css/main.min.d05fb5f317fcf33b3a52936399bdf6f47dc776516e1692e412ec7d76f4a5faa2.css><link rel=canonical href=https://www.ppardalj.com/blog/2020/07/mi-primer-proyecto-legacy/><meta property="og:url" content="https://www.ppardalj.com/blog/2020/07/mi-primer-proyecto-legacy/"><meta property="og:site_name" content="Pedro Pardal"><meta property="og:title" content="Mi primer proyecto legacy"><meta property="og:description" content="Mi primer contacto con código legacy fue hace ya más de 15 años, y ni siquiera sabía lo que era código legacy. En aquella época, jugaba a un juego online que se llama Ultima Online (si por casualidad has llegado a jugar, dame like, suscribete y activa la campanita). Básicamente es un RPG de mundo abierto donde puedes interactuar con los personajes de otra gente, ir a matar bichicos, pegarte de hostias con los demás… algo parecido al WoW, pero más viejuno todavía, con gráficos en 2D isométricos cutres."><meta property="og:locale" content="es_es"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2020-07-27T00:00:00+01:00"><meta property="article:modified_time" content="2020-07-27T00:00:00+01:00"><meta itemprop=name content="Mi primer proyecto legacy"><meta itemprop=description content="Mi primer contacto con código legacy fue hace ya más de 15 años, y ni siquiera sabía lo que era código legacy. En aquella época, jugaba a un juego online que se llama Ultima Online (si por casualidad has llegado a jugar, dame like, suscribete y activa la campanita). Básicamente es un RPG de mundo abierto donde puedes interactuar con los personajes de otra gente, ir a matar bichicos, pegarte de hostias con los demás… algo parecido al WoW, pero más viejuno todavía, con gráficos en 2D isométricos cutres."><meta itemprop=datePublished content="2020-07-27T00:00:00+01:00"><meta itemprop=dateModified content="2020-07-27T00:00:00+01:00"><meta itemprop=wordCount content="1265"><meta name=twitter:card content="summary"><meta name=twitter:title content="Mi primer proyecto legacy"><meta name=twitter:description content="Mi primer contacto con código legacy fue hace ya más de 15 años, y ni siquiera sabía lo que era código legacy. En aquella época, jugaba a un juego online que se llama Ultima Online (si por casualidad has llegado a jugar, dame like, suscribete y activa la campanita). Básicamente es un RPG de mundo abierto donde puedes interactuar con los personajes de otra gente, ir a matar bichicos, pegarte de hostias con los demás… algo parecido al WoW, pero más viejuno todavía, con gráficos en 2D isométricos cutres."></head><body class="ma0 avenir bg-near-white production"><header class="cover bg-center" style=background-image:url(https://www.ppardalj.com/images/nesa-by-makers-kwzWjTnDPLk-unsplash.jpg)><div class=bg-black-60><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">Pedro Pardal</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/formacion/ title="Formación pagina">Formación</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/contacto/ title="Contacto pagina">Contacto</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/blog/ title="Blog pagina">Blog</a></li></ul><div class=ananke-socials><a href=https://www.linkedin.com/in/ppardalj/ target=_blank rel=noopener class="ananke-social-link link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="follow on LinkedIn - Opens in a new window" aria-label="follow on LinkedIn - Opens in a new window"><span class=icon><svg viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></a><a href=https://www.youtube.com/@ppardalj target=_blank rel=noopener class="ananke-social-link link-transition youtube link dib z-999 pt3 pt0-l mr1" title="follow on YouTube - Opens in a new window" aria-label="follow on YouTube - Opens in a new window"><span class=icon><svg viewBox="0 0 576 512"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78.0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
</span></a><a href=https://www.instagram.com/ppardalj/ target=_blank rel=noopener class="ananke-social-link link-transition instagram link dib z-999 pt3 pt0-l mr1" title="follow on Instagram - Opens in a new window" aria-label="follow on Instagram - Opens in a new window"><span class=icon><svg viewBox="0 0 448 512"><path d="M224.1 141c-63.6.0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1.0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9.0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9.0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9.0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9.0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8.0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg></span></a></div></div></div></nav><div class="tc-l pv6 ph3 ph4-ns"><div class="f2 f1-l fw2 white-90 mb0 lh-title">Mi primer proyecto legacy</div></div></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked ttu">Blog</aside><div id=sharing class="mt3 ananke-socials"></div><h1 class="f1 athelas mt3 mb1">Mi primer proyecto legacy</h1><time class="f6 mv4 dib tracked" datetime=2020-07-27T00:00:00+01:00>julio 27, 2020</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>Mi primer contacto con código legacy fue hace ya más de 15 años, y ni siquiera sabía lo que era código legacy. En aquella época, jugaba a un juego online que se llama <a href=https://uo.com/>Ultima Online</a> (si por casualidad has llegado a jugar, dame like, suscribete y activa la campanita). Básicamente es un RPG de mundo abierto donde puedes interactuar con los personajes de otra gente, ir a matar bichicos, pegarte de hostias con los demás… algo parecido al WoW, pero más viejuno todavía, con gráficos en 2D isométricos cutres.</p><p><img src=/images/blog/ultima-online.jpg alt></p><p>Como en aquella época no tenía pasta para pagarme los 20 eurazos al mes que costaba la suscripción al servidor oficial, pues jugaba en los servers piratas que había. Estos servers piratas, que estaban mantenidos y gestionados por gente de la calle que nada tenía que ver con la empresa que llevaba el juego, pues os podéis imaginar, los dueños hacían lo que les daba la gana: ponerle oro a sus colegas, banear a la gente que le caía mal sin motivos, no eran capaces de arreglar bugs que la gente usaba en su beneficio… total, que la experiencia era nefasta.</p><p>Esto me llevó a mi y a un amigo a darle forma a la idea de montarnos nuestro propio server: <em>"¡en nuestro server el staff no será corrupto porque nosotros no nos corromperemos!"</em>, <em>"¡trataremos a todo el mundo por igual!"</em>, <em>"¡arreglaremos todos los bugs para que la experiencia sea la mejor!"</em> (Spoiler alert: no dimos ni una). Así que nos pusimos a investigar cómo montar nuestro propio server.</p><p><img src=/images/blog/bender-server.jpg alt></p><p>Lo interesante de esto, y por lo que lo cuento, es porque para montar un server, existía (y existe) un proyecto open source llamado <a href=https://github.com/runuo/runuo>RunUO</a>, que te permitía montar un server con código C# sobre la plataforma .NET. Era una aplicación de consola, que se comunicaba con un protocolo custom a nivel de byte con los clientes (ni APIs ni HTTP ni nada), y que en vez de base de datos tenía todos los datos del mundo en memoria, incluso los de jugadores que no entraban al server hacía años, esos también.</p><p>Y así fue como tuve mi primera experiencia con un proyecto grande (~500k líneas de código), que no tenía ni un sólo test, y que estaba escrito en su mayor parte por gente que tenía poca idea de ingeniería del software y buenas prácticas… pero que oye, de alguna forma… funcionaba. Mi primer proyecto era código legacy, y yo ni lo sabía.</p><h2 id=uo-legends>UO Legends</h2><p>Durante los siguientes 10 años que duró UO Legends, el server que montamos, se convirtió en el servidor no oficial más grande de España, monté un equipo de 10 personas de los cuales hasta unos 5 hacíamos contribuciones regulares de código, y mi equipo y yo <a href="https://www.youtube.com/watch?v=2QlM9xTkyww">desarrollamos 2 expansiones completas del juego</a>, un montón de funcionalidad, corregimos infinidad de fallos, metimos otra infinidad porque claro, el código no tenía tests :P así que tocabas una cosa y se rompían tres :D.</p><p><img src=/images/blog/uolegends.jpg alt></p><p>Desarrollar y probar cosas sobre este proyecto tampoco era tarea fácil. Para que os hagáis una idea, cada vez que querías probar un pequeño cambio, tenías que parar el server, desconectar los clientes, re-compilar toda la base de código (que tardaba ~2 minutos), volver a cargar toda la “base de datos” en memoria (que para el server de producción, si lo traías a local tardaba alrededor de 10 minutos), conectar los clientes, y probar a mano lo que quisieras. Y si te dejabas algún detallito pues… vuelta a empezar.</p><p>Seguro que os habéis tenido experiencias similares en vuestros proyectos. Yo os cuento éste porque es el que puedo contar y el que más me marcó pero… os hacéis una idea.</p><p>Este proyecto lo empecé en… 2005. Para 2007 empecé la carrera, acabé las asignaturas en 2012 y ese mismo año empecé a trabajar. Y claro, en el mundo real, pues también te encuentras legacy, está por todas partes. Y a mí siempre ha sido un tema que me ha llamado mucho la atención, siempre he tenido una vena perfeccionista que me ha llevado a “querer arreglar las cosas que no están rotas”. Y entre una cosa y otra, me decidí a hacer mi proyecto de fin de carrera, precisamente sobre legacy code, y precisamente usando este proyecto del Ultima Online como excusa.</p><h2 id=mi-proyecto-de-fin-de-carrera>Mi proyecto de fin de carrera</h2><p><em>“Estudio y refactorización del código del servidor de un juego multijugador online masivo”</em>, que bueno, por el nombre pues es bastante descriptivo, te puedes imaginar.</p><p>¿Cuánto tiempo crees que me llevó hacer el proyecto? ¡3 años! O sea, hasta finales de 2015 no defendí el proyecto de fin de carrera. Y básicamente, el motivo por el que tardé tantísimo tiempo en hacer el proyecto (aparte de porque ya estaba trabajando, y ves que el dinero entra en la cuenta, y pues dices ¿pa qué carajo voy a acabar la carrera?)&mldr; no, en serio, el motivo principal fue, que abordé el legacy completamente MAL.</p><p>Intenté documentar una aplicación de 500k líneas de código, sin priorizar nada, sin un objetivo, más allá del “mejorar por mejorar”, de la utopía de “voy a cambiarlo todo para dejarlo perfecto”, y planteé varias líneas de trabajo, algunas de las cuales eran muy interesantes a nivel académico, y con las cuales aprendí un montón, pero que, en la práctica… la mayoría no valían para nada. Me comí infinidad de horas de frustración peleándome con ese código, pero lo bueno después de todo, es que saqué muchas lecciones.</p><h2 id=lecciones-aprendidas>Lecciones aprendidas</h2><p>Os quiero contar las tres lecciones que a mi parecer fueron más importantes.</p><ol><li><p>La primera, es que <strong>siempre habrá legacy</strong>. No importa cuánto mejores el código, esa arquitectura perfecta, ese código perfecto… no existe. Y si existe, ni siquiera merece la pena alcanzarlo, pues el coste de llegar allí es prohibitivo. Es, asintótico, en el mismo sentido que en física, <a href="https://www.youtube.com/watch?v=biaVwtKOlWI">nunca se puede llegar a alcanzar la velocidad de la luz</a>, porque el coste de energía sería cada vez mayor y mayor. Por tanto, no se puede. Si pintásemos la curva de mejora de legacy code en función del esfuerzo invertido, hay un punto de rendimiento decreciente a partir del cual perdemos ROI, y deja de tener sentido invertir.</p></li><li><p>La segunda lección, es que hay que <strong>localizar la mejora del código alrededor de un objetivo</strong>. Mejorar por mejorar puede estar muy bien con fines académicos o didácticos, pero cuando te enfrentas a un proyecto en el mundo real, si no tienes un problema que resolver que motive invertir esfuerzo… todo el esfuerzo habrá sido en vano.</p></li><li><p>Y por último, la tercera lección, es que para vencer con éxito al monstruo del legacy code, hay que <strong>contar con las habilidades, herramientas y técnicas adecuadas</strong>. Hay que saber de orientación a objetos, pero también hay que controlar de testing. Hay que abordar el problema desde un punto de vista pragmático, y tener el mindset adecuado para que “no se te vaya la pinza”.</p></li></ol><p>Todo esto yo no lo tenía en su momento y lo he ido desarrollando con el tiempo a base de palos como esta historia que os he contado. Reciéntemente me decidí a poner en valor éstas y otras experiencias, y montar un <a href=https://www.exeal.com/legacy>curso de legacy code</a> para que tú no tengas que aprender a base de palos. Si trabajas cada día con un proyecto así y <em>no te gusta, te da sustito y te asusta</em>, yo que tú no me lo pensaba.</p><hr><p>PD. Si te interesa te puedes bajar la memoria de mi proyecto de fin de carrera <a href="https://drive.google.com/file/d/11p9r3qFSUmITv0TzbuccXu2WZf5dZB_-/view?usp=sharing">aquí</a> (Disclaimer: es un tostón de más de 200 páginas).</p><ul class=pa0></ul><div class="mt6 instapaper_ignoref"><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//ppardalj.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><aside class="w-30-l mt6-l"></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://www.ppardalj.com/>&copy; Pedro Pardal 2025</a><div><div class=ananke-socials><a href=https://www.linkedin.com/in/ppardalj/ target=_blank rel=noopener class="ananke-social-link link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="follow on LinkedIn - Opens in a new window" aria-label="follow on LinkedIn - Opens in a new window"><span class=icon><svg viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></a><a href=https://www.youtube.com/@ppardalj target=_blank rel=noopener class="ananke-social-link link-transition youtube link dib z-999 pt3 pt0-l mr1" title="follow on YouTube - Opens in a new window" aria-label="follow on YouTube - Opens in a new window"><span class=icon><svg viewBox="0 0 576 512"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78.0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
</span></a><a href=https://www.instagram.com/ppardalj/ target=_blank rel=noopener class="ananke-social-link link-transition instagram link dib z-999 pt3 pt0-l mr1" title="follow on Instagram - Opens in a new window" aria-label="follow on Instagram - Opens in a new window"><span class=icon><svg viewBox="0 0 448 512"><path d="M224.1 141c-63.6.0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1.0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9.0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9.0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9.0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9.0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8.0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg></span></a></div></div></div></footer></body></html>